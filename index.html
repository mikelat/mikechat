<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>MikeChat</title>
		<meta name="HandheldFriendly" content="True">
		<meta name="MobileOptimized" content="320">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

		<link rel="stylesheet" type="text/css" href="css/ink.min.css">
		<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
		<link rel="stylesheet" type="text/css" href="css/chat.css">
	</head>

	<body>
		<div class="ink-grid">
			<h1>MikeChat</h1>

			<div id="chat" class="large fw-300"></div>

			<form id="form" name="form" class="ink-form">
				<div class="column-group horizontal-gutters">
					<div class="control-group all-66 tiny-100">
						<label for="name">Name:</label>
						<div class="control">
							<input type="text" id="name" name="name" />
						</div>
					</div>
					<div class="control-group all-33 tiny-100">
						<label for="colour">Colour:</label>
						<div class="control">
							<select name="colour" id="colour">
								<option value="black">Black</option>
								<option value="red" style="color:red">Red</option>
								<option value="blue" style="color:blue">Blue</option>
								<option value="orange" style="color:orange">Orange</option>
								<option value="green" style="color:green">Green</option>
								<option value="purple" style="color:purple">Purple</option>
								<option value="brown" style="color:brown">Brown</option>
							</select>
						</div>
					</div>
				</div>
				<div class="control-group">
					<label for="message">Message:</label>
					<div class="control">
						<textarea name="message" id="message"></textarea>
					</div>
				</div>
				<input type="submit" name="submit" id="submit" class="ink-button blue fr large" value="Submit">
			</form>
		</div>

		<script type="text/javascript" src="js/jquery.js"></script>
		<script type="text/javascript" src="js/ink-all.min.js"></script>
		<script>
			$(document).ready(function () {
				var ws = new WebSocket("ws://" + window.location.hostname + ":" + 8888 + "/ws");
				$("#chat").html('<div class="fw-500" style="color: grey">Connecting...</div>');
				ws.onmessage = function(e) {
					$("#chat").append(e.data)
				};
				ws.onclose = function(e) {
					$("#chat").append('<div class="fw-500" style="color: red">Connection Lost.</div>');
				};
				ws.onopen = function(e) {
					$("#chat").html('<div class="fw-500" style="color: green">Connection Established! Welcome to Mikechat!</div>');
				};


				$("#form").submit(function(e) {
					ws.send($("#form").serialize());
					return false;
				});
			});
		</script>
	</body>
</html>